// Function to show project detail with multiple images
function showProjectDetail(imageData) {
    // Hide gallery and show project detail
    document.getElementById('gallery').style.display = 'none';
    document.getElementById('projects-page').style.display = 'none';
    const projectDetail = document.getElementById('project-detail');
    projectDetail.style.display = 'block';
    
    // Update project details
    document.getElementById('project-title-text').innerHTML = 
        imageData.title + ' <span id="project-year">' + imageData.year + '</span>';
    document.getElementById('project-description').textContent = imageData.description;
    
    // Clear and populate images container
    const imagesContainer = document.getElementById('project-images-container');
    imagesContainer.innerHTML = '';
    
    // Add main image (hero)
    const mainImageWrapper = document.createElement('div');
    mainImageWrapper.className = 'project-image-wrapper';
    
    const mainImage = document.createElement('img');
    mainImage.classList.add('hero-image'); // Add class for 50% scaling

    // Add extra classes for specific project scaling
    if (imageData.title.includes("CAPSTONE")) {
        mainImage.classList.add('capstone-hero-image');
    } else if (imageData.title === "DataViz") {
        mainImage.classList.add('dataviz-hero-image');
    } else if (imageData.title === "LumenBeat") {
        mainImage.classList.add('lumenbeat-hero-image');
    }
    
    // Use the direct image path
    mainImage.src = imageData.src;
    mainImage.alt = imageData.title;
    mainImageWrapper.appendChild(mainImage);
    
    // Add caption for main image
    const mainCaption = document.createElement('div');
    mainCaption.className = 'image-caption';
    
    // Add caption text elements with project info
    const captionDetail = document.createElement('span');
    captionDetail.textContent = "Image 00";
    
    const captionMedium = document.createElement('span');
    
    // Assign a medium based on the project title
    let medium = "";
    if (imageData.title.includes("CAPSTONE")) {
        medium = "Code, interactive";
    } else if (imageData.title.includes("DataViz")) {
        medium = "Data visualization";
    } else if (imageData.title.includes("GIS")) {
        medium = "Geographic mapping";
    } else if (imageData.title.includes("Photography")) {
        medium = "Digital photography";
    } else if (imageData.title.includes("Colloquium")) {
        medium = "Academic presentation";
    } else if (imageData.title.includes("Echo")) {
        medium = "Audio visualization";
    } else if (imageData.title.includes("Lumen")) {
        medium = "Light-based installation";
    } else if (imageData.title.includes("Meta")) {
        medium = "Interactive tool";
    } else if (imageData.title.includes("Rube")) {
        medium = "Mechanical construction";
    } else if (imageData.title.includes("Zine")) {
        medium = "Print publication";
    } else {
        medium = "Mixed media";
    }
    
    captionMedium.textContent = medium;
    
    const captionYear = document.createElement('span');
    captionYear.textContent = imageData.year;
    
    mainCaption.appendChild(captionDetail);
    mainCaption.appendChild(captionMedium);
    mainCaption.appendChild(captionYear);
    
    mainImageWrapper.appendChild(mainCaption);
    imagesContainer.appendChild(mainImageWrapper);
    
    // Special handling for Photography project
    if (imageData.title === "Photography") {
        // Call the custom function for photo gallery
        loadPhotographyImages(imagesContainer);
    } else {
        // Get the image number from the src (assuming format "images/imageXX.png")
        const basePath = imageData.src.substring(0, imageData.src.lastIndexOf('/') + 1);
        const imgNum = imageData.src.replace(/.*image(\d+)\..*$/, '$1');
        
        // Add detail images (if they exist)
        // We'll use consecutive image numbers for detail views
        for (let i = 1; i <= 3; i++) {
            const detailImageWrapper = document.createElement('div');
            detailImageWrapper.className = 'project-image-wrapper';
            
            const detailImage = document.createElement('img');
            detailImage.classList.add('detail-image');
            
            // For detail images, try using the next sequential images
            // You can adjust this pattern based on how your detail images are named
            const nextNum = (parseInt(imgNum) + i) % 10; // Cycle through 0-9 if we run out of images
            detailImage.src = `${basePath}image${nextNum.toString().padStart(2, '0')}.png`;
            
            detailImage.alt = imageData.title + ' - Detail View ' + i;
            detailImageWrapper.appendChild(detailImage);
            
            // Add caption for detail image
            const detailCaption = document.createElement('div');
            detailCaption.className = 'image-caption';
            
            const detailCaptionText = document.createElement('span');
            detailCaptionText.textContent = "Detail view " + i;
            
            const detailCaptionMedium = document.createElement('span');
            detailCaptionMedium.textContent = medium;
            
            const detailCaptionYear = document.createElement('span');
            detailCaptionYear.textContent = imageData.year;
            
            detailCaption.appendChild(detailCaptionText);
            detailCaption.appendChild(detailCaptionMedium);
            detailCaption.appendChild(detailCaptionYear);
            
            detailImageWrapper.appendChild(detailCaption);
            imagesContainer.appendChild(detailImageWrapper);
            
            // Handle image errors - remove the wrapper if image fails to load
            detailImage.onerror = function() {
                detailImageWrapper.remove();
            };
        }
    }
    
    // Update navigation
    document.getElementById('works-link').classList.add('active');
    document.getElementById('projects-link').classList.remove('active');
    
    // Scroll to top
    window.scrollTo(0, 0);
    
    // Update URL
    history.pushState({project: imageData.title}, imageData.title, '#project-' + encodeURIComponent(imageData.title.toLowerCase()));
}